## 최종적 일관성이란 무엇인가요?
**최종적 일관성(Eventual Consistency)** 이란 **분산 시스템에서 고가용성을 유지하기 위해서 사용하는 일관성 모델**입니다. 

데이터가 수정되면, 그 변경 내용은 비동기적으로 (여러 복제본으로 분산되어 있는)다른 노드에 전파되기 때문에 일시적으로 각 노드의 데이터가 다를 수 있습니다. 

하지만 시간이 지나면 모든 노드에 변경 사항이 전달되어 **결국에는 모든 노드가 동일한 데이터**를 가지게 되는 것을 의미합니다.
<img width="1237" height="759" alt="image" src="https://github.com/user-attachments/assets/7b908613-0fdd-4fed-b418-1384b1eaceb3" />
위 구성은 복제를 수행하고 있는 노드에 대해 조회 연산을 허용하여 높은 가용성을 유지할 수 있으며, 최종적으로는 모든 노드가 같은 데이터를 가지고 있는 최종적 일관성을 달성할 수 있습니다. 하지만, 일시적인 데이터 불일치가 발생하여 클라이언트는 오래된 데이터를 읽을 수 있다는 단점이 있습니다.

## 최종적 일관성의 특징은?
1. **즉각적인 일관성 보장 X** : 모든 노드가 항상 같은 값을 가지는 것은 아닙니다.
2. **최종적으로 일관성 보장 O** : 일정 시간이 지나면(네트워크 지연, 복제 지연 등 이후) 모든 노드가 같은 값을 가지게 됩니다.
3. **가용성, 확장성에 유리** : 강한 일관성(strong consistency)보다 빠르고, 장애 상황에서도 시스템이 계속 동작할 수 있습니다.

## 예시
1. **아마존 다이나모DB, 카산드라, 몽고DB** 등 **분산 NoSQL 데이터베이스**에서 많이 사용합니다.
2. SNS에서 "좋아요"를 누르면, 모든 서버에 즉시 반영되지는 않지만 시간이 지나면 모든 서버에 반영됩니다.

<br>

## 최종적 일관성과 강한 일관성의 차이는 무엇인가요? 
**강한 일관성(Strong Consistency)** 은 최종적 일관성과는 다르게, 특정 연산이 끝난 직후 모든 노드가 동일한 데이터를 갖도록 보장하는 것을 의미합니다. 
즉, 사용자가 데이터를 수정한 직후 다른 노드에서 해당 데이터를 읽더라도, 반드시 최신 값을 얻게 됩니다.

<img width="1671" height="805" alt="image" src="https://github.com/user-attachments/assets/85bcb2e8-6f30-4b3a-9c86-8ea347d60578" />
예를 들어, 위 구성에서는 복제가 완료되기 전까지 다른 노드의 읽기 연산을 차단하여 강한 일관성을 달성할 수 있습니다. 하지만, 클라이언트로부터의 요청을 처리할 수 없다는 점에서 가용성이 희생된다는 단점이 있습니다.

## 정리
- **강한 일관성(Strong Consistency)**: 연산 후에 바로 모든 복제본이 같은 값을 가지고 있음을 보장한다.
- **최종 일관성(Eventual Consistency)**: 시간이 지나면 모든 복제본이 같은 값을 가진다는 것을 보장한다.

---

### 참고 자료
- [분산 데이터베이스 탐구: 데이터 복제와 일관성](https://loosie.tistory.com/886)
- [System Design Interview Concepts – Eventual Consistency](https://acodersjourney.com/eventual-consistency/)
- [토스ㅣSLASH 24 - 보상 트랜잭션으로 분산 환경에서도 안전하게 환전하기](https://www.youtube.com/watch?feature=shared&v=xpwRTu47fqY)
