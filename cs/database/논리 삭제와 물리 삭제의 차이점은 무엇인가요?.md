## 논리 삭제(Soft Delete)와 물리 삭제(Hard Delete)의 차이점은 무엇인가요?
데이터베이스에서 데이터를 삭제하는 방법은 크게 **물리 삭제**와 **논리 삭제**가 존재합니다. 

물리 삭제는 DELETE 명령어를 통해 직접 데이터를 삭제하는 방식이며, 논리 삭제는 UPDATE 명령을 사용하여 삭제 여부를 나타내는 컬럼을 수정하는 방식을 의미합니다. 

즉, **물리 삭제는 실제로 데이터를 삭제**하는 반면 **논리 삭제는 데이터가 삭제되었음을 표시만 한다**는 점에서 차이가 있습니다.
```sql
# 물리 삭제 처리
delete from member where id = 1;

# 논리 삭제 처리와 조회
update member set deleted_at = curdate() where id = 1;
select * from member where deleted_at is null;
```
<br>

## 1. 논리 삭제 (Soft Delete)
- 정의 : 데이터를 실제로 삭제하지 않고, 삭제된 것처럼 표시만 하는 방법입니다.
- 방법 : 보통 `is_deleted`, `deleted_at` 같은 컬럼을 추가하여, 해당 값이 설정되면 삭제된 것으로 간주합니다.
- 장점 :
  1. 데이터 복구가 쉽다.
  2. 삭제 이력 추적이 가능하다.
  3. 데이터 무결성(참조 무결성) 유지에 유리하다.
- 단점 :
  1. 데이터가 계속 남아있어 저장 공간을 차지한다.
  2. 쿼리 시 삭제 여부를 항상 확인해야 한다.
 
## 2. 물리 삭제 (Hard Delete)
- 정의 : 데이터를 데이터베이스에서 완전히 삭제하는 방법입니다.
- 방법 : DELETE 쿼리 등을 사용하여 데이터를 완전히 제거합니다.
- 장점 :
  1. 저장 공간을 절약할 수 있다.
  2. 쿼리가 단순해진다.
- 단점 :
  1. 삭제된 데이터 복구가 불가능하다.
  2. 삭제 이력 추적이 어렵다.
  3. 참조 무결성 문제가 발생할 수 있다.

<br>

## 어떤 방식을 선택하는 것이 가장 좋은가요?
방식마다 장단점이 존재하기 때문에 상황에 맞는 선택을 하는 것이 옳다고 생각합니다.

**물리 삭제**의 경우에는 실제로 데이터를 삭제하기 때문에 저장 공간을 새로 확보할 수 있으며, 테이블의 크기를 줄여 검색 속도 향상을 기대할 수 있습니다. 하지만, 데이터를 다시 복구하기 어렵다는 점과 삭제된 데이터가 비즈니스 의사결정에 사용되기 어렵다는 단점이 있습니다.

**논리 삭제**는 데이터를 삭제하지 않기 때문에 데이터 복구에 용이하고, 비즈니스 의사결정에 사용될 수 있습니다. 하지만, 테이블에 데이터가 많아져 성능에 악영향을 줄 수 있고, 논리 삭제된 데이터를 제외하지 않고 조회하는 실수가 발생할 수 있다는 단점이 존재합니다.

<br>

| 구분         | 논리 삭제 (Soft Delete)   | 물리 삭제 (Hard Delete)   |
|--------------|--------------------------|--------------------------|
| 데이터 존재  | 실제로는 남아 있음       | 완전히 삭제됨            |
| 복구 가능성  | 복구 가능                | 복구 불가                |
| 이력 추적    | 용이함                   | 어려움                   |
| 저장 공간    | 계속 차지                | 절약 가능                |
| 쿼리 복잡도  | 조건 추가 필요           | 단순함                   |

---
### 연관 질문
- [JPA에서 Soft Delete를 구현하는 방법은?](https://github.com/kyungjinleelee/tech-interview/blob/main/cs/database/JPA%EC%97%90%EC%84%9C%20Soft%20Delete%EB%A5%BC%20%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94%20%EB%B0%A9%EB%B2%95%EC%9D%80%3F.md)
---
### 참고 자료
- [JPA에서 Soft Delete를 구현하는 방법](https://engineerinsight.tistory.com/172)
- [Soft Delete vs Hard Delete](https://www.becomebetterprogrammer.com/soft-delete-vs-hard-delete/#Are_Soft_Deletes_Bad)
