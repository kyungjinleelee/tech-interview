## CQRS 패턴이란 무엇인가요?
명령 쿼리 책임 분리 패턴(Command Query Responsibility Segregation, CQRS)은 **명령(Command)과 조회(Query)의 책임을 분리**하는 아키텍처 패턴입니다. 
데이터 저장소에 대한 쓰기 모델과 읽기 모델을 분리하여 복잡성을 낮추고 성능을 향상시킬 수 있습니다.

e.g.) 예를 들어, 상품 등록은 RDB에 저장, 상품 목록 조회는 Elasticsearch에서 수행하면서 서로 다른 요구사항을 가진 Command와 Query를 독립적으로 확장 가능합니다.

## CQRS 패턴의 장점은 무엇인가요?
- **안정성 향상**
    - WRITE 시 발생하는 잠금 경합을 낮춤
- **유지보수성 향상**
    - 분리를 통해 작아지고 모델이 단순해짐
- **확장성 향상**
    - 읽기와 쓰기의 빈도에 따라 확장 전략 선택 가능
- **성능 향상**
    - 읽기와 쓰기 역할에 충실
- 장애 전파 약화됨
- 모델 별로 성능이나 요구사항에 맞는 데이터베이스나 접근 기술을 사용할 수 있음
    - 예를 들어, 명령 모델은 트랜잭션이 지원되는 RDB를 사용하고, 조회 모델은 조회 성능이 높은 NoSQL을 사용할 수 있음
    - 단, 해당 방식은 명령 모델의 변경을 조회 모델로 전파하여 동기화시켜야 할 필요가 있을 수 있음 주의

즉, 간단히 정리하면 읽기와 쓰기를 분리만 해도 **유지보수성이 향상**되며 트랜잭션 관리가 편해진다고 할 수 있습니다.

## CQRS 패턴의 단점은 무엇인가요?
- 쓰기 시점과 읽는 시점에 따른 **데이터 동기화 이슈**가 있을 수 있음
    - 쓰기와 읽기를 같은 데이터베이스를 사용하지 않기 때문 (빈번하진 않음)
    - 데이터베이스가 하나일 땐 관련 없음
- 구현 코드가 많고, 더 많은 구현 기술이 필요
    - 따라서 단일 모델을 사용할 때 발생하는 복잡함 때문에 발생하는 구현 비용과 조회 전용 모델을 만들 때 발생하는 복잡함 때문에 발생하는 구현 비용을 비교해서 신중하게 도입을 결정해야 함
 
----

### 참고 자료
- [최범균님 - CQRS 아는 척하기 1](https://www.youtube.com/watch?v=xf0kXMTFJm8)
- [최범균님 - CQRS 아는 척하기 2](https://www.youtube.com/watch?feature=shared&v=H1IF3BUeFb8)
- [우아콘2021 - B마트 전시 도메인 CQRS 적용하기](https://www.youtube.com/watch?v=fg5xbs59Lro)
- [AWS 마이크로서비스의 데이터 지속성 지원 - CQRS 패턴](https://docs.aws.amazon.com/ko_kr/prescriptive-guidance/latest/modernization-data-persistence/cqrs-pattern.html)

### 꼬리 질문
- [CQRS는 언제 도입하면 좋을까요?](#)
