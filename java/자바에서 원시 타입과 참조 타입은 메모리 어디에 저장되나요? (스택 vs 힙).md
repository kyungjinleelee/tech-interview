## 자바에서 원시 타입과 참조 타입은 메모리 어디에 저장되나요? (스택 vs 힙)

### 자바 메모리 구조 요약

| 메모리 영역 | 설명 |
|-------------|------|
| 스택 (Stack) | 메서드 실행 시 생성되는 지역 변수, 매개변수 등이 저장됨 |
| 힙 (Heap)     | `new` 키워드로 생성한 객체가 저장됨 |

> 참고: 메서드 영역, 코드 캐시 등도 존재하지만 이 글에선 생략

---

### 변수 유형별 메모리 저장 위치

| 변수 유형               | 저장 위치          | 설명 |
|------------------------|--------------------|------|
| 원시 타입 (`int`, `boolean`) | 스택                | 값 자체가 스택에 저장됨 |
| 참조 타입 (`객체`, `배열`)   | 스택: 참조(주소), 힙: 객체 | 참조 값은 스택에, 실제 객체는 힙에 저장됨 |

---

### 예제 코드

```java
public class Main {
    public static void main(String[] args) {
        int a = 10;                          // 원시 타입
        Person p = new Person("Alice");     // 참조 타입
    }
}

class Person {
    String name;

    Person(String name) {
        this.name = name;
    }
}
```

#### 변수 `a`
- `int`는 원시 타입 → **스택**에 값 `10`으로 저장

#### 변수 `p`
- `Person`은 참조 타입 → 
  - `p` 변수 자체는 **스택**에 저장 (주소 값)
  - 실제 `Person` 객체는 **힙**에 저장

---

## 구조 시각화

```
[Stack 영역]
a ──▶ 10
p ──▶ 주소값 0x100

[Heap 영역]
0x100 ──▶ Person 객체(name = "Alice")
```

---

## 정리

| 구분              | 예시                        | 스택 저장      | 힙 저장       |
|-------------------|-----------------------------|----------------|----------------|
| 원시 타입 변수     | `int x = 5`                 | ✔ 값(5) 저장   | ✖ 없음         |
| 참조 타입 변수     | `Person p = new Person()`   | ✔ 참조(주소)   | ✔ 객체 저장     |
| 배열도 객체        | `int[] arr = new int[3]`    | ✔ 참조 저장    | ✔ 배열 저장     |


- 메서드 호출 시 생성된 **지역 변수는 스택에 저장**되며, 메서드 종료 시 자동 소멸
- 힙에 저장된 객체는 참조되지 않을 때 **GC(Garbage Collector)**가 자동으로 정리함

---

### 참고 자료
- [[JAVA] 데이터 타입(원시 타입, 참조 타입)과 메모리 사용영역](https://annajin.tistory.com/55)
- [[JAVA] 자바의 기본 타입과 참조 타입 (메모리 저장 방식)](https://minseok-study.tistory.com/entry/JAVA-%EC%9E%90%EB%B0%94%EC%9D%98-%EA%B8%B0%EB%B3%B8-%ED%83%80%EC%9E%85%EA%B3%BC-%EC%B0%B8%EC%A1%B0-%ED%83%80%EC%9E%85-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%A0%80%EC%9E%A5-%EB%B0%A9%EC%8B%9D)
